# poq.gg / `esports` app - Expected behaviour and specifications

**TODO**: This is a WIP document, embodying the hope that we can have a
reference to look at when wondering how some feature should work, as opposed to
having to text search key words in multiple Discord conversations ...

---

## Events

`event` is the generic word used to refer to the tournaments played on the app. For legacy reasons, you may find the words `event`, `tournament` and `scrim` used interchangeably in the code and comments.

### Hosts:

Any user can create their own event for free, after they've participated to at least five events. This limitation has been introduced to counter a spam attack we've had to face in 2020 (summer I think ?).

There are three different levels of privileges for hosts, from lower to higher:

- None;
- Affiliate;
- Partner.

// TODO list privileges.

### Allocated quarters:

Affiliates and partners may be granted a given `allocation`, which is an amount of Quarters they can use at their own discretion for the only purpose of boosting their events' pots.

Allocated Quarters:

- Can be affected to an event during its creation;
- Can be increased by the host while editing an event;
- Can be increased or decreased by an admin while editing an event;
- Will NOT be returned to the host's allocation when cancelling an event.

Allocations are currently manually attributed in `quarter-servers`' Firebase, in `/accounts/<userId>.allocation`. When distributing them as reward for an event, they're taken directly from the esports wallet, and sent to the user, like for `qBonus`.

---

## Quarters purchase / Memberships

Described in the
[Terminal3 related code's directory](../src/api/routers/terminal3/README.md)

---

## Coupons

Coupons are used to distribute bonus Quarters to users. In practice, they are
unique codes that are generated by a staff member and can be redeemed by users
who receive them.

- A coupon can be redeemed by any user who gets access to it;
- A coupon can only be redeemed once by a given user;
- A coupon can be redeemed by an arbitrary number of users;
- Redeemed coupons appear as "bonus" transactions from the user's persepctive.
